parameters:
- name: platform
  default: ''
- name: configuration
  default: ''

steps:
- powershell: $(Build.SourcesDirectory)/.azp/create-portable.ps1 -Platform "${{ parameters.platform }}" -Configuration "${{ parameters.configuration }}" -WorkDir "$(Pipeline.Workspace)" -OutputDir "$(Build.ArtifactStagingDirectory)\portable"
  displayName: Create portable build
- publish: $(Build.ArtifactStagingDirectory)\portable
  artifact: 'Portable ${{ parameters.platform }} ${{ parameters.configuration }}'
  displayName: 'Upload portable build'
# TODO: upload only msix and appxsym?
- publish: $(Build.SourcesDirectory)\AppPackage\AppPackages
  artifact: 'MSIX ${{ parameters.platform }} ${{ parameters.configuration }}'
  displayName: 'Upload MSIX package'
